<form id="config-form" data-type="actions" style="display: inline-flex; flex-direction: column;margin-bottom: 0rem;">
  <h2 style="text-align: center;">硬件动作</h2>
  <h5 style="margin-top: 0;margin-bottom: 1rem;text-align: center;">将任何引脚字段设置为 255 将禁用相应的选项</h5>
  <div class="cards-container" style="display: flex;gap: 16px;">
    <div class="card-content">
      <h3 style="margin-top: 0;text-align: center;">HomeKey 触发器</h3>
      <h5 style="margin: 0;">! 在成功/失败的 HomeKey 身份验证时执行，以及在检测到 NFC 标签时执行(被视为失败事件)。</h5>
      <h5 style="margin-top: 0;">! Neopixel 和简单 GPIO 都有瞬时状态。</h5>
      <div class="tabs-container">
        <div id="nfc-triggers" class="tabs-list">
          <p class="tab-btn nfc-triggers-selected-tab"
            onclick="switchTab(this)" data-tab-index="0">Neopixel</p>
          <p class="tab-btn" onclick="switchTab(this)"
            data-tab-index="1">简单 GPIO</p>
          <p class="tab-btn" onclick="switchTab(this)"
            data-tab-index="2">蜂鸣器</p>
        </div>
        <span style="height: 1px;border-top: 1px #424242 solid;display: block;margin: 0;padding: 0;"></span>
      </div>
      <div class="nfc-triggers-selected-body" data-nfc-triggers-body="0">
        <div class="flex-row-lg flex-col-sm flex-center-lg" style="flex-wrap: wrap;">
          <div class="flex-col-lg" style="flex: 1;">
            <div class="input-group">
              <label for="nfcNeopixelPin">GPIO 引脚</label>
              <input type="number" name="nfcNeopixelPin" id="nfcNeopixelPin" placeholder="8" required min="0" max="255">
            </div>
            <div class="input-group">
              <label for="neoPixelType">像素类型</label>
              <select name="neoPixelType" id="neoPixelType">
                <option value="0">RGB</option>
                <option value="1">RBG</option>
                <option value="2">BRG</option>
                <option value="3">BGR</option>
                <option value="4">GBR</option>
                <option value="5">GRB</option>
              </select>
            </div>
          </div>
          <div class="flex-col-lg" style="flex: 1;">
            <div class="input-group">
              <label for="neopixelSuccessTime" style="max-width: 7rem;">超时时间 (毫秒) 认证成功</label>
              <input type="number" name="neopixelSuccessTime" id="neopixelSuccessTime" placeholder="1000" required>
            </div>
            <div class="input-group">
              <label for="neopixelFailTime" style="max-width: 7rem;">超时时间 (毫秒) 认证失败</label>
              <input type="number" name="neopixelFailTime" id="neopixelFailTime" placeholder="1000" required>
            </div>
          </div>
        </div>
        <div
          style="display: flex;border: 1px #8e8271 solid;padding: .5rem;justify-content: space-around;">
          <div id="nfc-s-color" style="display: flex;flex-direction: column;">
            <h4 style="margin-block: .2rem;text-align: center;">认证成功颜色</h4>
            <div id="nfc-s-vals" style="display: flex;gap:8px;flex-wrap: wrap;justify-content: center;">
              <div style="display: flex; flex-direction: column;">
                <label for="neopixelSuccessColor!0!1">R</label>
                <input type="number" style="max-width: 3.5rem" name="neopixelSuccessColor!0!1" id="neopixelSuccessColor!0!1" min="0" max="255" placeholder="255" required>
              </div>
              <div style="display: flex; flex-direction: column;">
                <label for="neopixelSuccessColor!1!1">G</label>
                <input type="number" style="max-width: 3.5rem" name="neopixelSuccessColor!1!1" id="neopixelSuccessColor!1!1" min="0" max="255" placeholder="255" required>
              </div>
              <div style="display: flex; flex-direction: column;">
                <label for="neopixelSuccessColor!2!1">B</label>
                <input type="number" style="max-width: 3.5rem" name="neopixelSuccessColor!2!1" id="neopixelSuccessColor!2!1" min="0" max="255" placeholder="255" required>
              </div>
            </div>
          </div>
          <span style="border: 1px #8e8271 solid; margin: 1rem;"></span>
          <div id="nfc-f-color" style="display: flex;flex-direction: column;">
            <h4 style="margin-block: .2rem;text-align: center;">认证失败颜色</h4>
            <div id="nfc-f-vals" style="display: flex;gap:8px;flex-wrap: wrap;justify-content: center;">
              <div style="display: flex; flex-direction: column;">
                <label for="neopixelFailureColor!0!1">R</label>
                <input type="number" style="max-width: 3.5rem" name="neopixelFailureColor!0!1" id="neopixelFailureColor!0!1" min="0" max="255" placeholder="255" required>
              </div>
              <div style="display: flex; flex-direction: column;">
                <label for="neopixelFailureColor!1!1">G</label>
                <input type="number" style="max-width: 3.5rem" name="neopixelFailureColor!1!1" id="neopixelFailureColor!1!1" min="0" max="255" placeholder="255" required>
              </div>
              <div style="display: flex; flex-direction: column;">
                <label for="neopixelFailureColor!2!1">B</label>
                <input type="number" style="max-width: 3.5rem" name="neopixelFailureColor!2!1" id="neopixelFailureColor!2!1" min="0" max="255" placeholder="255" required>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="nfc-triggers-hidden-body" data-nfc-triggers-body="1">
        <div style="display: flex;flex-wrap: wrap;justify-content: space-between;gap: 10px;">
          <fieldset>
            <legend>认证成功</legend>
            <div class="flex-sm flex-col-lg flex-end-sm">
              <div class="around-sm" style="display: flex;gap: 16px;flex: 2;align-items: flex-end">
                <div style="display: flex;flex-direction: column;">
                  <label for="nfcSuccessPin">GPIO 引脚</label>
                  <input type="number" name="nfcSuccessPin" id="nfcSuccessPin" placeholder="2" required min="0" max="255">
                </div>
                <div style="display: flex;flex-direction: column;">
                  <label for="nfcSuccessTime">超时时间 (毫秒)</label>
                  <input type="number" name="nfcSuccessTime" id="nfcSuccessTime" placeholder="1000" required>
                </div>
              </div>
              <div class="flex-center-sm" style="display: flex;flex-direction: column;flex: 1;">
                <label for="nfcSuccessHL">GPIO 状态</label>
                <select name="nfcSuccessHL" id="nfcSuccessHL">
                  <option value="0">低电平</option>
                  <option value="1">高电平</option>
                </select>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <legend>认证失败</legend>
            <div class="flex-sm flex-col-lg flex-end-sm">
              <div class="around-sm" style="display: flex;gap: 16px;flex: 2;align-items: flex-end">
                <div style="display: flex;flex-direction: column;">
                  <label for="nfcFailPin">GPIO 引脚</label>
                  <input type="number" name="nfcFailPin" id="nfcFailPin" placeholder="2" required min="0" max="255">
                </div>
                <div style="display: flex;flex-direction: column;">
                  <label for="nfcFailTime">超时时间 (毫秒)</label>
                  <input type="number" name="nfcFailTime" id="nfcFailTime" placeholder="1000" required>
                </div>
              </div>
              <div class="flex-center-sm" style="display: flex;flex-direction: column;flex: 1;">
                <label for="nfcFailHL">GPIO 状态</label>
                <select name="nfcFailHL" id="nfcFailHL">
                  <option value="0">低电平</option>
                  <option value="1">高电平</option>
                </select>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <legend>第二动作(成功时)</legend>
            <div class="flex-sm flex-col-lg flex-end-sm">
              <div class="around-sm" style="display: flex;gap: 16px;flex: 2;align-items: flex-end">
                <div style="display: flex;flex-direction: column;">
                  <label for="hkAltActionPin">GPIO 引脚</label>
                  <input type="number" name="hkAltActionPin" id="hkAltActionPin" placeholder="2" required min="0" max="255">
                </div>
                <div style="display: flex;flex-direction: column;">
                  <label for="hkAltActionTimeout">超时时间 (毫秒)</label>
                  <input type="number" name="hkAltActionTimeout" id="hkAltActionTimeout" placeholder="1000" required>
                </div>
              </div>
              <div class="flex-center-sm" style="display: flex;flex-direction: column;flex: 1;">
                <label for="hkAltActionGpioState">GPIO 状态</label>
                <select name="hkAltActionGpioState" id="hkAltActionGpioState">
                  <option value="0">低电平</option>
                  <option value="1">高电平</option>
                </select>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <div class="nfc-triggers-hidden-body" data-nfc-triggers-body="2">
        <div>
          <h5 style="margin-top: 0;margin-bottom: .5rem;">! 蜂鸣器为认证结果提供音频反馈</h5>
          <h5 style="margin-block: 0;">! 成功和失败使用不同的频率和持续时间</h5>
        </div>
        <div style="display: flex;flex-wrap: wrap;justify-content: space-between;gap: 10px;">
          <fieldset>
            <legend>蜂鸣器配置</legend>
            <div class="flex-sm flex-col-lg flex-end-sm">
              <div class="around-sm" style="display: flex;gap: 16px;flex: 2;align-items: flex-end">
                <div style="display: flex;flex-direction: column;">
                  <label for="buzzerPin">GPIO 引脚</label>
                  <input type="number" name="buzzerPin" id="buzzerPin" placeholder="255" required min="0" max="255">
                </div>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <legend>成功音效</legend>
            <div class="flex-sm flex-col-lg flex-end-sm">
              <div class="around-sm" style="display: flex;gap: 16px;flex: 2;align-items: flex-end">
                <div style="display: flex;flex-direction: column;">
                  <label for="buzzerSuccessFreq">频率 (Hz)</label>
                  <input type="number" name="buzzerSuccessFreq" id="buzzerSuccessFreq" placeholder="2000" required min="100" max="5000">
                </div>
                <div style="display: flex;flex-direction: column;">
                  <label for="buzzerSuccessTime">持续时间 (毫秒)</label>
                  <input type="number" name="buzzerSuccessTime" id="buzzerSuccessTime" placeholder="200" required min="50" max="2000">
                </div>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <legend>失败音效</legend>
            <div class="flex-sm flex-col-lg flex-end-sm">
              <div class="around-sm" style="display: flex;gap: 16px;flex: 2;align-items: flex-end">
                <div style="display: flex;flex-direction: column;">
                  <label for="buzzerFailFreq">频率 (Hz)</label>
                  <input type="number" name="buzzerFailFreq" id="buzzerFailFreq" placeholder="500" required min="100" max="5000">
                </div>
                <div style="display: flex;flex-direction: column;">
                  <label for="buzzerFailTime">持续时间 (毫秒)</label>
                  <input type="number" name="buzzerFailTime" id="buzzerFailTime" placeholder="500" required min="50" max="2000">
                </div>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </div>
    <div class="card-content">
      <h3 style="margin-top: 0;text-align: center;">HomeKit 触发器</h3>
      <h5 style="margin-top: 0;margin-bottom: .5rem;">! 在 Home 应用中交互时执行，并可选择在成功的 HomeKey 身份验证时执行(默认启用)</h5>
      <div class="tabs-container">
        <div id="homekit-triggers" class="tabs-list">
          <p class="tab-btn homekit-triggers-selected-tab"
            onclick="switchTab(this)" data-tab-index="0">简单 GPIO</p>
          <p class="tab-btn"
            onclick="switchTab(this)" data-tab-index="1">NFC</p>
        </div>
        <span style="height: 1px;border-top: 1px #424242 solid;display: block;margin: 0;padding: 0;"></span>
      </div>
      <div class="homekit-triggers-selected-body" data-homekit-triggers-body="0">
        <div>
          <h5 style="margin-top: 0;margin-bottom: .5rem;">! 简单 GPIO 遵循"HomeKey 时总是锁定/解锁"选项</h5>
          <h5 style="margin-block: 0;">! 瞬时状态仅在初始状态为"锁定"时适用</h5>
        </div>
        <div class="flex-col-lg">
          <div class="input-group">
            <label for="gpioActionPin">GPIO 引脚</label>
            <input type="number" name="gpioActionPin" id="gpioActionPin" placeholder="2" required style="width: 4rem;" min="0" max="255">
          </div>
          <div class="input-group">
            <label for="gpioActionLockState">GPIO 状态 - 锁定</label>
            <select name="gpioActionLockState" id="gpioActionLockState">
              <option value="0">低电平</option>
              <option value="1">高电平</option>
            </select>
          </div>
          <div class="input-group">
            <label for="gpioActionUnlockState">GPIO 状态 - 解锁</label>
            <select name="gpioActionUnlockState" id="gpioActionUnlockState">
              <option value="0">低电平</option>
              <option value="1">高电平</option>
            </select>
          </div>
          <div class="input-group">
            <label for="hkGpioControlledState">可被 HomeKey 操作</label>
            <select name="hkGpioControlledState" id="hkGpioControlledState">
              <option value="0">禁用</option>
              <option value="1">启用</option>
            </select>
          </div>
          <div class="input-group">
            <label for="gpioActionMomentaryEnabled">瞬时状态</label>
            <small style="color: #888; font-size: 0.85em; margin-top: 2px; display: block;">触发后在指定时间内保持状态，然后自动复位</small>
            <select name="gpioActionMomentaryEnabled" id="gpioActionMomentaryEnabled">
              <option value="0">禁用</option>
              <option value="1">仅 Home 应用</option>
              <option value="2">仅 Home Key</option>
              <option value="3">Home 应用 + Home Key</option>
            </select>
          </div>
          <div class="input-group">
            <label for="gpioActionMomentaryTimeout">瞬时超时时间 (毫秒)</label>
            <input type="number" name="gpioActionMomentaryTimeout" id="gpioActionMomentaryTimeout" placeholder="5000" required style="width: 4rem;">
          </div>
        </div>
      </div>
      <div class="homekit-triggers-hidden-body" data-homekit-triggers-body="1">
        <div>
          <h5 style="margin-top: 0;margin-bottom: .5rem;">! NFC模式遵循"HomeKey 时总是锁定/解锁"选项</h5>
          <h5 style="margin-block: 0;">! 瞬时状态仅在初始状态为"锁定"时适用</h5>
        </div>
        <div class="flex-col-lg">
          <div class="input-group">
            <label for="hkDumbSwitchMode">状态</label>
            <select name="hkDumbSwitchMode" id="hkDumbSwitchMode">
                <option value="0">禁用</option>
                <option value="1">启用</option>
            </select>
          </div>
          <div class="input-group">
            <label for="gpioActionMomentaryEnabled">瞬时状态</label>
            <small style="color: #888; font-size: 0.85em; margin-top: 2px; display: block;">触发后在指定时间内保持状态，然后自动复位</small>
            <select name="gpioActionMomentaryEnabled" id="gpioActionMomentaryEnabled">
              <option value="0">禁用</option>
              <option value="1">仅 Home 应用</option>
              <option value="2">仅 Home Key</option>
              <option value="3">Home 应用 + Home Key</option>
            </select>
          </div>
          <div class="input-group">
            <label for="gpioActionMomentaryTimeout">瞬时超时时间 (毫秒)</label>
            <input type="number" name="gpioActionMomentaryTimeout" id="gpioActionMomentaryTimeout" placeholder="5000" required style="width: 4rem;">
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="buttons-group">
    <button type="submit" style="cursor: pointer;">提交</button>
    <button type="reset" style="cursor: pointer;" class="destructive-btn">重置</button>
  </div>
</form>